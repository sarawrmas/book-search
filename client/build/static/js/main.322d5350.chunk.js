(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{113:function(e,a,t){e.exports=t(130)},118:function(e,a,t){},128:function(e,a,t){},129:function(e,a,t){e.exports=t.p+"static/media/logo.d06004f8.png"},130:function(e,a,t){"use strict";t.r(a);var n,r,c,l,i,s,m,o=t(0),u=t.n(o),g=t(47),d=t.n(g),p=(t(118),t(35)),b=t(107),v=t(20),h=t.n(v),f=t(32),E=t(15),w=t(138),I=t(139),y=t(147),O=t(102),j=t(140),S=t(141),k=t(154),_=t(31),T=t(97),x=t(98),C=t(86),N=t.n(C),G=new(function(){function e(){Object(T.a)(this,e)}return Object(x.a)(e,[{key:"getProfile",value:function(){return N()(this.getToken())}},{key:"loggedIn",value:function(){var e=this.getToken();return!!e&&!this.isTokenExpired(e)}},{key:"isTokenExpired",value:function(e){try{return N()(e).exp<Date.now()/1e3}catch(a){return!1}}},{key:"getToken",value:function(){return localStorage.getItem("id_token")}},{key:"login",value:function(e){localStorage.setItem("id_token",e),window.location.assign("/")}},{key:"logout",value:function(){localStorage.removeItem("id_token"),window.location.assign("/")}}]),e}()),M=t(40),$=t(43),B=Object($.a)(n||(n=Object(M.a)(["\nmutation loginUser($email: String!, $password: String!) {\n  login(email: $email, password: $password) {\n    token\n    user {\n      _id\n      email\n      username\n    }\n  }\n}\n"]))),L=(Object($.a)(r||(r=Object(M.a)(["\nmutation addUser($username: String!, $password: String!, $email: String!) {\n  addUser(username: $username, password: $password, email: $email) {\n    \n    user {\n      _id\n      username\n      email\n    }\n    token\n  }\n}\n"]))),Object($.a)(c||(c=Object(M.a)(["\n    mutation saveGame($gameData: GameInput!) { \n    saveGame (gameData: $gameData)\n        {\n            _id\n            username\n            email\n            gameCount\n            savedGames {\n              name\n              gameId\n              rating\n              ratings_count\n              image\n              esrb\n            }\n        }\n    }\n"])))),D=Object($.a)(l||(l=Object(M.a)(["\n    mutation removeGame($gameId: String!) {\n        removeGame(gameId: $gameId) {\n            _id\n            username\n            email\n            gameCount\n            savedGames {\n              name\n              gameId\n              rating\n              ratings_count\n              image\n              esrb\n            }\n        }\n}\n"]))),F=Object($.a)(i||(i=Object(M.a)(["\n  mutation addReview($gameId: String!, $reviewBody: String!) {\n    addReview(gameId: $gameId, reviewBody: $reviewBody) {\n      gameId\n      name\n      image\n      rating\n      ratings_count\n      esrb\n      reviewCount\n      reviews {\n        _id\n        reviewBody\n        createdAt\n        username\n      }\n    }\n  }\n"]))),q=t(155),J=function(e){var a=localStorage.getItem("saved_games")?JSON.parse(localStorage.getItem("saved_games")):null;if(!a)return!1;var t=null===a||void 0===a?void 0:a.filter((function(a){return a!==e}));return localStorage.setItem("saved_games",JSON.stringify(t)),!0},R=[{gameId:1,name:"game1",description:"This is my description",image:"https://wallpaperaccess.com/full/897502.png",rating:5,ratings_count:800,esrb:"Mature"},{gameId:2,name:"game2",description:"This is my description",image:"https://wallpaperaccess.com/full/897502.png",rating:5,ratings_count:800,esrb:"Mature"},{gameId:3,name:"game3",description:"This is my description",image:"https://wallpaperaccess.com/full/897502.png",rating:5,ratings_count:800,esrb:"Mature"},{gameId:4,name:"game4",description:"This is my description",image:"https://wallpaperaccess.com/full/897502.png",rating:5,ratings_count:800,esrb:"Mature"},{gameId:5,name:"game5",description:"This is my description",image:"https://wallpaperaccess.com/full/897502.png",rating:5,ratings_count:800,esrb:"Mature"},{gameId:6,name:"game6",description:"This is my description",image:"https://wallpaperaccess.com/full/897502.png",rating:5,ratings_count:800,esrb:"Mature"},{gameId:7,name:"game7",description:"This is my description",image:"https://wallpaperaccess.com/full/897502.png",rating:5,ratings_count:800,esrb:"Mature"},{gameId:8,name:"game8",description:"This is my description",image:"https://wallpaperaccess.com/full/897502.png",rating:5,ratings_count:800,esrb:"Mature"},{gameId:9,name:"game9",description:"This is my description",image:"https://wallpaperaccess.com/full/897502.png",rating:5,ratings_count:800,esrb:"Mature"},{gameId:10,name:"game10",description:"This is my description",image:"https://wallpaperaccess.com/full/897502.png",rating:5,ratings_count:800,esrb:"Mature"},{gameId:11,name:"game11",description:"This is my description",image:"https://wallpaperaccess.com/full/897502.png",rating:5,ratings_count:800,esrb:"Mature"},{gameId:12,name:"game12",description:"This is my description",image:"https://wallpaperaccess.com/full/897502.png",rating:5,ratings_count:800,esrb:"Mature"},{gameId:13,name:"game13",description:"This is my description",image:"https://wallpaperaccess.com/full/897502.png",rating:5,ratings_count:800,esrb:"Mature"},{gameId:14,name:"game14",description:"This is my description",image:"https://wallpaperaccess.com/full/897502.png",rating:5,ratings_count:800,esrb:"Mature"},{gameId:15,name:"game15",description:"This is my description",image:"https://wallpaperaccess.com/full/897502.png",rating:5,ratings_count:800,esrb:"Mature"},{gameId:16,name:"game16",description:"This is my description",image:"https://wallpaperaccess.com/full/897502.png",rating:5,ratings_count:800,esrb:"Mature"},{gameId:17,name:"game17",description:"This is my description",image:"https://wallpaperaccess.com/full/897502.png",rating:5,ratings_count:800,esrb:"Mature"},{gameId:18,name:"game18",description:"This is my description",image:"https://wallpaperaccess.com/full/897502.png",rating:5,ratings_count:800,esrb:"Mature"},{gameId:19,name:"game19",description:"This is my description",image:"https://wallpaperaccess.com/full/897502.png",rating:5,ratings_count:800,esrb:"Mature"},{gameId:20,name:"game20",description:"This is my description",image:"https://wallpaperaccess.com/full/897502.png",rating:5,ratings_count:800,esrb:"Mature"}],Y=function(){var e=Object(q.a)(L),a=Object(E.a)(e,1)[0],t=Object(o.useState)([]),n=Object(E.a)(t,2),r=n[0],c=n[1],l=Object(o.useState)(""),i=Object(E.a)(l,2),s=i[0],m=i[1],g=Object(o.useState)(localStorage.getItem("saved_games")?JSON.parse(localStorage.getItem("saved_games")):[]),d=Object(E.a)(g,2),p=d[0],v=d[1];Object(o.useEffect)((function(){return function(){var e;(e=p).length?localStorage.setItem("saved_games",JSON.stringify(e)):localStorage.removeItem("saved_games")}}));var T=function(){var e=Object(f.a)(h.a.mark((function e(a){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a.preventDefault();try{c(R),m("")}catch(t){console.error(t)}case 2:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),x=function(){var e=Object(f.a)(h.a.mark((function e(t){var n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=r.find((function(e){return e.gameId===t})),G.loggedIn()?G.getToken():null){e.next=4;break}return e.abrupt("return",!1);case 4:return e.prev=4,e.next=7,a({variables:{gameData:n}});case 7:v([].concat(Object(b.a)(p),[n.gameId])),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(4),console.error(e.t0);case 13:case"end":return e.stop()}}),e,null,[[4,10]])})));return function(a){return e.apply(this,arguments)}}();return u.a.createElement(u.a.Fragment,null,u.a.createElement(w.a,{fluid:!0,className:"text-light bg-dark"},u.a.createElement(I.a,{className:"searchCSS"},u.a.createElement("h1",null,"Search 500,00+ Games To View Ratings and Save Them To Your Collection!"),u.a.createElement(y.a,{class:"searchButtonCSS",onSubmit:T},u.a.createElement(y.a.Row,null,u.a.createElement(O.a,{xs:12,md:8},u.a.createElement(y.a.Control,{name:"searchInput",value:s,onChange:function(e){return m(e.target.value)},type:"text",size:"lg",placeholder:"Search a Game!"})),u.a.createElement(O.a,{xs:12,md:4},u.a.createElement(j.a,{type:"submit",variant:"success",size:"lg"},"Submit")))))),u.a.createElement("h2",null,r.length?"Viewing ".concat(r.length," results:"):""),u.a.createElement(I.a,{className:"result-list"},u.a.createElement(S.a,null,r.map((function(e){return u.a.createElement(k.a,{key:e.gameId,className:"gameCard"},u.a.createElement(k.a.Body,null,u.a.createElement(_.b,{to:"/".concat(e.gameId)},u.a.createElement(k.a.Title,null,e.name),u.a.createElement("br",null),e.image?u.a.createElement(k.a.Img,{src:e.image,alt:"The cover for ".concat(e.title),variant:"top",className:"card-img"}):null),u.a.createElement("br",null),G.loggedIn()&&u.a.createElement(j.a,{disabled:null===p||void 0===p?void 0:p.some((function(a){return a===e.gameId})),className:"btn-block btn-info",onClick:function(){return x(e.gameId)}},(null===p||void 0===p?void 0:p.some((function(a){return a===e.gameId})))?"Saved!":"Save to Collection")))})))))},A=t(151),P=Object($.a)(s||(s=Object(M.a)(["\n{\n    me {\n      _id\n      username\n      email\n      gameCount\n      savedGames {\n        name\n        gameId\n        rating\n        ratings_count\n        image\n        esrb\n      }\n    }\n  }\n"]))),V=Object($.a)(m||(m=Object(M.a)(["\nquery game($gameId: String!) {\n  game(gameId: $gameId) {\n    gameId\n    name\n    description\n    image\n    rating\n    ratings_count\n    esrb\n    reviewCount\n    reviews {\n      _id\n      createdAt\n      username\n      reviewBody\n    }\n  }\n}\n"]))),z=function(){var e=Object(A.a)(P),a=e.loading,t=e.data,n=Object(q.a)(D),r=Object(E.a)(n,1)[0],c=(null===t||void 0===t?void 0:t.me)||[],l=function(){var e=Object(f.a)(h.a.mark((function e(a){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(G.loggedIn()?G.getToken():null){e.next=3;break}return e.abrupt("return",!1);case 3:return e.prev=3,e.next=6,r({variables:{gameId:a}});case 6:J(a),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(3),console.error(e.t0);case 12:case"end":return e.stop()}}),e,null,[[3,9]])})));return function(a){return e.apply(this,arguments)}}();return a?u.a.createElement("h2",null,"LOADING..."):u.a.createElement(u.a.Fragment,null,u.a.createElement(w.a,{fluid:!0,className:"text-light bg-dark"},u.a.createElement(I.a,null,u.a.createElement("h1",null,"Viewing Your Saved Games!"))),u.a.createElement(I.a,null,u.a.createElement("h2",null,c.savedGames.length?"Viewing ".concat(c.savedGames.length," saved ").concat(1===c.savedGames.length?"game":"games",":"):"You have no saved games!"),u.a.createElement(S.a,null,c.savedGames.map((function(e){return u.a.createElement(k.a,{key:e.gameId,border:"dark"},e.image?u.a.createElement(k.a.Img,{src:e.image,alt:"The cover for ".concat(e.title),variant:"top"}):null,u.a.createElement(k.a.Body,null,u.a.createElement(k.a.Title,null,e.title),u.a.createElement("p",{className:"small"},"Publisher: ",e.publisher),u.a.createElement(k.a.Text,null,e.description),u.a.createElement(j.a,{className:"btn-block btn-danger",onClick:function(){return l(e.gameId)}},"Delete this Game!")))})))))},U=t(150),H=t(149),K=t(145),W=t(152),Q=t(143),X=t(57),Z=t(142),ee=function(){var e=Object(o.useState)({email:"",password:""}),a=Object(E.a)(e,2),t=a[0],n=a[1],r=Object(o.useState)(!1),c=Object(E.a)(r,1)[0],l=Object(o.useState)(!1),i=Object(E.a)(l,2),s=i[0],m=i[1],g=Object(q.a)(B),d=Object(E.a)(g,2),b=d[0],v=d[1].error,w=function(e){var a=e.target,r=a.name,c=a.value;n(Object(p.a)(Object(p.a)({},t),{},Object(X.a)({},r,c)))},I=function(){var e=Object(f.a)(h.a.mark((function e(a){var r,c;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.preventDefault(),e.prev=1,e.next=4,b({variables:Object(p.a)({},t)});case 4:r=e.sent,c=r.data,G.login(c.login.token),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),console.error(e.t0);case 12:n({username:"",email:"",password:""});case 13:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(a){return e.apply(this,arguments)}}();return u.a.createElement(u.a.Fragment,null,u.a.createElement(y.a,{noValidate:!0,validated:c,onSubmit:I},u.a.createElement(Z.a,{dismissible:!0,onClose:function(){return m(!1)},show:s,variant:"danger"},"Something went wrong with your login credentials!"),u.a.createElement(y.a.Group,null,u.a.createElement(y.a.Label,{htmlFor:"email"},"Email"),u.a.createElement(y.a.Control,{type:"text",placeholder:"Your email",name:"email",onChange:w,value:t.email,required:!0}),u.a.createElement(y.a.Control.Feedback,{type:"invalid"},"Email is required!")),u.a.createElement(y.a.Group,null,u.a.createElement(y.a.Label,{htmlFor:"password"},"Password"),u.a.createElement(y.a.Control,{type:"password",placeholder:"Your password",name:"password",onChange:w,value:t.password,required:!0}),u.a.createElement(y.a.Control.Feedback,{type:"invalid"},"Password is required!")),u.a.createElement(j.a,{disabled:!(t.email&&t.password),type:"submit",variant:"success"},"Submit")),v&&u.a.createElement("div",null,"Login failed"))},ae=(t(128),t(129),function(){var e=Object(o.useState)(!1),a=Object(E.a)(e,2),t=a[0],n=a[1];return u.a.createElement(u.a.Fragment,null,u.a.createElement("header",null,u.a.createElement(U.a,{bg:"primary",variant:"dark",expand:"lg"},u.a.createElement(I.a,{fluid:!0},u.a.createElement(U.a.Brand,{as:_.b,to:"/"},"Glad You Game"),u.a.createElement(U.a.Collapse,{id:"navbar"},u.a.createElement(H.a,{className:"ml-auto"},G.loggedIn()?u.a.createElement(u.a.Fragment,null,u.a.createElement(H.a.Link,{as:_.b,to:"/saved",className:"nav-link"},"Saved Games"),u.a.createElement(H.a.Link,{onClick:G.logout,className:"nav-link"},"Logout")):u.a.createElement(H.a.Link,{onClick:function(){return n(!0)}},"Login/Signup"))))),u.a.createElement(K.a,{size:"lg",show:t,onHide:function(){return n(!1)},"aria-labelledby":"signup-modal"},u.a.createElement(W.a.Container,{defaultActiveKey:"login"},u.a.createElement(Q.a,null,u.a.createElement(O.a,{sm:3},u.a.createElement(K.a.Header,{closeButton:!0},u.a.createElement(K.a.Title,{id:"signup-modal"}))),u.a.createElement(O.a,{sm:9},u.a.createElement(K.a.Body,null,u.a.createElement(W.a.Content,null,u.a.createElement(W.a.Pane,{eventKey:"login"},u.a.createElement(ee,{handleModalClose:function(){return n(!1)}})),u.a.createElement(j.a,{variant:"primary"},"Signup")," "))))))))}),te=t(17),ne=t(106),re=t(146),ce=t(148),le=t(144),ie=t(105),se=function(e){var a=e.reviews;return u.a.createElement("div",{className:"card mb-3"},u.a.createElement("div",{className:"card-header"},u.a.createElement("span",{className:"text-light"},"Reviews")),u.a.createElement("div",{className:"card-body"},a&&a.map((function(e){return u.a.createElement("p",{className:"pill mb-3",key:e._id},e.reviewBody,u.a.createElement("br",null),u.a.createElement("br",null),e.username," "," on ",e.createdAt)}))))},me=function(e){var a=e.gameId,t=Object(o.useState)(""),n=Object(E.a)(t,2),r=n[0],c=n[1],l=Object(o.useState)(0),i=Object(E.a)(l,2),s=i[0],m=i[1],g=Object(q.a)(F),d=Object(E.a)(g,2),p=d[0],b=d[1].error,v=function(){var e=Object(f.a)(h.a.mark((function e(t){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,e.next=4,p({variables:{reviewBody:r,gameId:a}});case 4:c(""),m(0),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),console.error(e.t0);case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(a){return e.apply(this,arguments)}}();return u.a.createElement("div",null,u.a.createElement("p",{className:"m-0 ".concat(280===s?"text-error":"")},"Character Count: ",s,"/280",b&&u.a.createElement("span",{className:"ml-2"},"Something went wrong...")),u.a.createElement("form",{className:"flex-row justify-center justify-space-between-md align-stretch",onSubmit:v},u.a.createElement("textarea",{placeholder:"Leave a review!",value:r,className:"form-input col-12 col-md-9",onChange:function(e){e.target.value.length<=280&&(c(e.target.value),m(e.target.value.length))}}),u.a.createElement("br",null),u.a.createElement("button",{className:"btn col-12 col-md-3",type:"submit"},"Submit")))},oe=function(){var e=Object(te.f)().gameId,a=R[e],t=Object(A.a)(V,{variables:{gameId:e}}),n=t.loading,r=t.data,c=(null===r||void 0===r?void 0:r.game)||{};return n?u.a.createElement("div",null,"Loading..."):u.a.createElement("div",null,u.a.createElement(_.b,{to:"/"},"\u2190 Back"),u.a.createElement("h2",null,a.name),u.a.createElement("img",{src:a.image,alt:"a screenshot from the game ".concat(a.name),className:"current-img"}),u.a.createElement("h3",null,"Score: ",a.rating," from ",a.ratings_count," reviews"),u.a.createElement("h3",null,"Rating: ",a.esrb),u.a.createElement("p",null,a.description),c.reviewCount>0&&u.a.createElement(se,{reviews:c.reviews}),G.loggedIn()&&u.a.createElement(me,{gameId:c.gameId}))},ue=Object(ne.a)({uri:"/graphql"}),ge=Object(ie.a)((function(e,a){var t=a.headers,n=localStorage.getItem("id_token");return{headers:Object(p.a)(Object(p.a)({},t),{},{authorization:n?"Bearer ".concat(n):""})}})),de=new re.a({link:ge.concat(ue),cache:new ce.a});var pe=function(){return console.info("what is client? ",de),u.a.createElement(le.a,{client:de},u.a.createElement(_.a,null,u.a.createElement(u.a.Fragment,null,u.a.createElement(ae,null),u.a.createElement(te.c,null,u.a.createElement(te.a,{exact:!0,path:"/",component:Y}),u.a.createElement(te.a,{exact:!0,path:"/saved",component:z}),u.a.createElement(te.a,{exact:!0,path:"/:gameId",component:oe}),u.a.createElement(te.a,{render:function(){return u.a.createElement("h1",{className:"display-2"},"Wrong page!")}})))))};d.a.render(u.a.createElement(u.a.StrictMode,null,u.a.createElement(pe,null)),document.getElementById("root"))}},[[113,1,2]]]);
//# sourceMappingURL=main.322d5350.chunk.js.map